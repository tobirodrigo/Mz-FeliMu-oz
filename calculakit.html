<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arma tu kit</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.2.0/remixicon.min.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css"/>
    <link rel="stylesheet" href="css/style.css">
</head>
<body id="boddy">
    <!--NAVBAR-->
    <nav class="navbar navbar-expand-lg bg-white sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img src="img/iconMZ.png" class="logo-mz" alt="">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">¿Quienes somos?</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Servicios</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Contacto</a>
                    </li>
                </ul>
                <a href="#" class="btn btn-brand ms-lg-3">Arma tu kit</a>
            </div>
        </div>
    </nav>

    <!--MAIN-->
    <main id="main">
        <img style="margin-top: 100px;" src="img/qmd.jpg" alt="">
        <div class="container">
            <label for="opciones">Selecciona la capacidad del AA:</label>
            <select class="form-control" id="opciones" name="opciones">
                <option value="2250">-</option>
                <option value="3000">2500-3000 fr.</option>
                <option value="4500">4500-5000 fr.</option>
                <option value="6000">5000-6000 fr.</option>
            </select>
            <!-- Select condicional que se muestra según la opción seleccionada -->
            <div id="opcionesCondicionales" style="display: none;">
                <label for="opcionesExtra">Selecciona medida de los caños (alta y baja):</label>
                <select class="form-control" id="opcionesExtra" name="opcionesExtra">
                </select>
            </div>

            <label for="mts">Cant. metros de caño <span style="color: #b2b3b6;">(Por el momento solo 3 - 6 mts)</span></label>
            <select class="form-control" id="mts" name="mts">
                <option value="1">3</option>
                <option value="2">6</option>
            </select>         
            <br>
            <p>Materiales <small></small> </p>

            <!-- AISLANTES -->
            <label>
                <input type="checkbox" name="chkAislantes" id="chkAislantes"> Aislantes <small style="color: #008080;"> Frio/calor. Calculados segun sección y largo de caño</small>
            </label> <br>

            <!-- CINTA -->
            <label>
                <input type="checkbox" name="chkCinta" id="chkCinta"> Cinta
            </label>
            <div id="selectCinta" style="display: none;">
                <label for="opcionesCinta">Selecciona un tipo de cinta:</label>
                <select class="form-control" id="opcionesCinta" name="opcionesCinta">
                    <option value="4094.00">CON adhesivo</option>
                    <option value="3680.00">SIN adhesivo</option>
                </select><br>
                <label for="cantCintas">Cantidad:</label>
                <input class="form-control" type="number" name="cantCintas" id="cantCintas" value="1">
            </div> <br>

            <!-- MENSULAS -->
            <label>
                <input type="checkbox" name="chkMensulas" id="chkMensulas"> Ménsulas
            </label>
            <div id="selectMensulas" style="display: none;">
                <label for="opcionesMensulas">Selecciona la medida de las mensulas:</label>
                <select class="form-control" id="opcionesMensulas" name="opcionesMensulas">
                    <option value="8500.00">42 cm</option>
                    <option value="11245.00">52 cm</option>
                    <option value="17489.00">62 cm</option>
                </select><br>
            </div><br>

            <!-- KIT DE TORNILLOS -->
            <label>
                <input type="checkbox" name="chkKitTornillos" id="chkKitTornillos"> Kit tornillos
            </label> <br>

            <!-- KIT DE PATAS ANTIVIBRANTES -->
            <label>
                <input type="checkbox" name="chkPatas" id="chkPatas"> Patas antivibrantes
            </label> <br>

            <!-- MANGUERA CRISTAL -->
            <label>
                <input type="checkbox" name="chkManguera" id="chkManguera"> Manguera cristal
            </label>
            <div id="selectManguera" style="display: none;">
                <label for="opcionesManguera">Medida:</label>
                <select class="form-control" id="opcionesManguera" name="opcionesManguera">
                    <option value="780.00">1/2"</option>
                    <option value="960.00">5/8"</option>
                </select><br>
                <label for="cantManguera">Cantidad <small style="color: #008080;">Metros</small></label>
                <input class="form-control" type="number" name="cantManguera" id="cantManguera" value="3">
            </div><br>

            <!-- CABLE CONDUCTOR -->
            <label>
                <input type="checkbox" name="chkCable" id="chkCable"> Cable de interconexión unidades
            </label>
            <div id="selectCable" style="display: none;">
                <label for="opcionesCable">Selecciona el tipo de cable:</label>
                <select class="form-control" id="opcionesCable" name="opcionesCable">
                    <option value="2300.00">5 x 1,5mm (tipo taller)</option>
                    <option value="3052.00">5 x 2,5mm (tipo taller)</option>
                </select><br>
                <label for="cantCable">Cantidad <small style="color: #008080;">Metros</small></label>
                <input class="form-control" type="number" name="cantCable" id="cantCable" value="3">
            </div><br>

            <button onclick="calcularTotal()" type="button" class="btn btn-primary mb-2 mt-3" data-bs-toggle="modal" data-bs-target="#exampleModal">
                ¡Listo!, calcular
            </button>

            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Presupuesto de materiales de instalación</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <!-- Aquí se mostrará la lista de materiales seleccionados -->
                            <div id="lista-materiales"></div>
                            <!-- Aquí se mostrará el total calculado -->
                            <div id="total-calculado"></div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                            <button type="button" class="btn btn-success" id="btn-whatsapp">Enviar vía WhatsApp</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- FOOTER -->
    <footer id="footer">
        <div class="container">
            <div class="copyright">
                &copy; 2024<strong> MZ Service</strong>. Todos los derechos reservados.
            </div>
            <div class="credits">
                <a href="https://www.sysmam.com.ar">Contacto desarrollador</a>
            </div>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>

    <script>
        $(document).ready(function() {
            $('#opciones').on('change', function() {
                actualizarOpcionesCondicionales();
                $('#opcionesCondicionales').show();
            });

            // Inicialmente ocultar todos los elementos dependientes
            $('#selectCinta').hide();
            $('#selectMensulas').hide();
            $('#selectManguera').hide();
            $('#selectCable').hide();

            $('input[name="chkCinta"]').change(function() {
                $('#selectCinta').toggle(this.checked);
            });

            $('input[name="chkMensulas"]').change(function() {
                $('#selectMensulas').toggle(this.checked);
            });

            $('input[name="chkManguera"]').change(function() {
                $('#selectManguera').toggle(this.checked);
            });

            $('input[name="chkCable"]').change(function() {
                $('#selectCable').toggle(this.checked);
            });

            // Botón de WhatsApp
            $('#btn-whatsapp').click(function() {
                var total = $('#total-calculado').text();
                var mensaje = "Hola, el total estimado del presupuesto es: " + total;
                var url = "https://api.whatsapp.com/send?text=" + encodeURIComponent(mensaje);
                window.open(url, '_blank');
            });
        });

        function actualizarOpcionesCondicionales() {
    var opcion = $('#opciones').val();
    var opcionesExtra = $('#opcionesExtra');
    opcionesExtra.empty();
    

    /*PRUEBA*/
    
    function mostrarOpcionesCondicionales() {
      var opcionesSelect = document.getElementById('opciones');
      var opcionesCondicionalesDiv = document.getElementById('opcionesCondicionales');
      var opcionesExtraSelect = document.getElementById('opcionesExtra');}
        
  
    if (opcion == '2250' || opcion == '3000') {
        opcionesExtra.append(new Option('1/4" x 3/8"', '23760.00'));
        opcionesExtra.append(new Option('1/4" x 1/2"', '28560.00'));
    } else if (opcion == '4500') {
        opcionesExtra.append(new Option('1/4" x 1/2"', '28560.00'));
        opcionesExtra.append(new Option('3/8" x 5/8"', '37920.00'));
    } else if (opcion == '6000') {
        opcionesExtra.append(new Option('3/8" x 5/8"', '37920.00')); }
}

    function calcularTotal() {
    var total = 0;
    var opcion = $('#opcionesExtra').val();
    var mts = parseInt($('#mts').val());
    var materialesSeleccionados = [];

    if (opcion) {
        total += parseFloat(opcion) * mts;
        materialesSeleccionados.push(`Caños: $${(parseFloat(opcion) * mts).toFixed(2)}`);
    }

    if ($('#chkAislantes').is(':checked')) {
        var costoAislantes = 1736.94 * mts;
        total += costoAislantes;
        materialesSeleccionados.push(`Aislantes: $${costoAislantes.toFixed(2)}`);
    }

    if ($('#chkCinta').is(':checked')) {
        var opcionCinta = $('#opcionesCinta').val();
        var cantCintas = parseInt($('#cantCintas').val());
        var costoCinta = parseFloat(opcionCinta) * cantCintas;
        total += costoCinta;
        materialesSeleccionados.push(`Cinta: $${costoCinta.toFixed(2)}`);
    }

    if ($('#chkMensulas').is(':checked')) {
        var opcionMensulas = $('#opcionesMensulas').val();
        var costoMensulas = parseFloat(opcionMensulas);
        total += costoMensulas;
        materialesSeleccionados.push(`Ménsulas: $${costoMensulas.toFixed(2)}`);
    }

    if ($('#chkKitTornillos').is(':checked')) {
        var costoTornillos = 440.70;
        total += costoTornillos;
        materialesSeleccionados.push(`Kit tornillos: $${costoTornillos.toFixed(2)}`);
    }

    if ($('#chkPatas').is(':checked')) {
        var costoPatas = 3630.00;
        total += costoPatas;
        materialesSeleccionados.push(`Patas antivibrantes: $${costoPatas.toFixed(2)}`);
    }

    if ($('#chkManguera').is(':checked')) {
        var opcionManguera = $('#opcionesManguera').val();
        var cantManguera = parseInt($('#cantManguera').val());
        var costoManguera = parseFloat(opcionManguera) * cantManguera;
        total += costoManguera;
        materialesSeleccionados.push(`Manguera: $${costoManguera.toFixed(2)}`);
    }

    if ($('#chkCable').is(':checked')) {
        var opcionCable = $('#opcionesCable').val();
        var cantCable = parseInt($('#cantCable').val());
        var costoCable = parseFloat(opcionCable) * cantCable;
        total += costoCable;
        materialesSeleccionados.push(`Cable: $${costoCable.toFixed(2)}`);
    }

    $('#lista-materiales').html(materialesSeleccionados.join('<br>'));
    $('#total-calculado').text('El total es: $' + total.toFixed(2));
}
    </script>
</body>
</html>
